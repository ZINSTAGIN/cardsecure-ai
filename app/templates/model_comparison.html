{% extends 'base.html' %}

{% block title %}Model Comparison{% endblock %}

{% block content %}
<!-- Header - Compact -->
<section class="pt-24 pb-8 gradient-bg relative overflow-hidden">
    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center text-white">
            <h1 class="text-3xl lg:text-4xl font-bold mb-2">Model Comparison</h1>
            <p class="text-blue-100">Compare performance metrics across all ensemble models</p>
        </div>
    </div>
</section>

<section class="py-6 -mt-8 relative z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Model Cards - Compact Grid -->
        <div class="grid grid-cols-2 lg:grid-cols-3 gap-3 mb-6">
            <!-- Stacking Ensemble -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="p-3 bg-gradient-to-r from-purple-600 to-indigo-600">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-layer-group text-white text-sm"></i>
                            </div>
                            <div>
                                <h3 class="text-sm font-bold text-white">Stacking</h3>
                                <p class="text-purple-200 text-[10px]">Meta-learner</p>
                            </div>
                        </div>
                        <span class="px-2 py-0.5 bg-white/20 rounded-full text-white text-[10px] font-medium">Best</span>
                    </div>
                </div>
                <div class="p-3">
                    <div class="space-y-2">
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">Accuracy</span>
                                <span class="font-bold">99.92%</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-purple-600 rounded-full" style="width: 99.92%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">F1-Score</span>
                                <span class="font-bold">0.96</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-indigo-600 rounded-full" style="width: 96%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">ROC-AUC</span>
                                <span class="font-bold">0.99</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-violet-600 rounded-full" style="width: 99%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- XGBoost -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="p-3 bg-gradient-to-r from-green-600 to-emerald-600">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-rocket text-white text-sm"></i>
                            </div>
                            <div>
                                <h3 class="text-sm font-bold text-white">XGBoost</h3>
                                <p class="text-green-200 text-[10px]">Gradient Boost</p>
                            </div>
                        </div>
                        <span class="px-2 py-0.5 bg-white/20 rounded-full text-white text-[10px] font-medium">Fast</span>
                    </div>
                </div>
                <div class="p-3">
                    <div class="space-y-2">
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">Accuracy</span>
                                <span class="font-bold">99.74%</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-green-600 rounded-full" style="width: 99.74%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">F1-Score</span>
                                <span class="font-bold">0.95</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-emerald-600 rounded-full" style="width: 95%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">ROC-AUC</span>
                                <span class="font-bold">0.98</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-teal-600 rounded-full" style="width: 98%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Random Forest -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="p-3 bg-gradient-to-r from-blue-600 to-cyan-600">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-tree text-white text-sm"></i>
                            </div>
                            <div>
                                <h3 class="text-sm font-bold text-white">Random Forest</h3>
                                <p class="text-blue-200 text-[10px]">200 Trees</p>
                            </div>
                        </div>
                        <span class="px-2 py-0.5 bg-white/20 rounded-full text-white text-[10px] font-medium">Robust</span>
                    </div>
                </div>
                <div class="p-3">
                    <div class="space-y-2">
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">Accuracy</span>
                                <span class="font-bold">99.85%</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-blue-600 rounded-full" style="width: 99.85%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">F1-Score</span>
                                <span class="font-bold">0.94</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-cyan-600 rounded-full" style="width: 94%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">ROC-AUC</span>
                                <span class="font-bold">0.97</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-sky-600 rounded-full" style="width: 97%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- LightGBM -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="p-3 bg-gradient-to-r from-yellow-500 to-orange-500">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-bolt text-white text-sm"></i>
                            </div>
                            <div>
                                <h3 class="text-sm font-bold text-white">LightGBM</h3>
                                <p class="text-yellow-200 text-[10px]">Light Boost</p>
                            </div>
                        </div>
                        <span class="px-2 py-0.5 bg-white/20 rounded-full text-white text-[10px] font-medium">Light</span>
                    </div>
                </div>
                <div class="p-3">
                    <div class="space-y-2">
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">Accuracy</span>
                                <span class="font-bold">99.68%</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-yellow-500 rounded-full" style="width: 99.68%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">F1-Score</span>
                                <span class="font-bold">0.93</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-orange-500 rounded-full" style="width: 93%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">ROC-AUC</span>
                                <span class="font-bold">0.97</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-amber-500 rounded-full" style="width: 97%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Neural Network -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="p-3 bg-gradient-to-r from-pink-600 to-rose-600">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-brain text-white text-sm"></i>
                            </div>
                            <div>
                                <h3 class="text-sm font-bold text-white">Neural Net</h3>
                                <p class="text-pink-200 text-[10px]">MLP 128-64</p>
                            </div>
                        </div>
                        <span class="px-2 py-0.5 bg-white/20 rounded-full text-white text-[10px] font-medium">Deep</span>
                    </div>
                </div>
                <div class="p-3">
                    <div class="space-y-2">
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">Accuracy</span>
                                <span class="font-bold">99.45%</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-pink-600 rounded-full" style="width: 99.45%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">F1-Score</span>
                                <span class="font-bold">0.92</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-rose-600 rounded-full" style="width: 92%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">ROC-AUC</span>
                                <span class="font-bold">0.95</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-red-500 rounded-full" style="width: 95%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Voting Ensemble -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="p-3 bg-gradient-to-r from-gray-700 to-gray-900">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
                                <i class="fas fa-vote-yea text-white text-sm"></i>
                            </div>
                            <div>
                                <h3 class="text-sm font-bold text-white">Voting</h3>
                                <p class="text-gray-300 text-[10px]">Soft Vote</p>
                            </div>
                        </div>
                        <span class="px-2 py-0.5 bg-white/20 rounded-full text-white text-[10px] font-medium">Ensemble</span>
                    </div>
                </div>
                <div class="p-3">
                    <div class="space-y-2">
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">Accuracy</span>
                                <span class="font-bold">99.78%</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-gray-700 rounded-full" style="width: 99.78%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">F1-Score</span>
                                <span class="font-bold">0.94</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-gray-800 rounded-full" style="width: 94%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1">
                                <span class="text-gray-600">ROC-AUC</span>
                                <span class="font-bold">0.98</span>
                            </div>
                            <div class="h-1.5 bg-gray-200 rounded-full">
                                <div class="h-full bg-gray-900 rounded-full" style="width: 98%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Charts Row - Compact Side by Side -->
        <div class="grid lg:grid-cols-2 gap-4 mb-6">
            <div class="bg-white rounded-xl shadow-lg p-4">
                <h3 class="text-sm font-bold text-gray-900 mb-2">Performance Radar</h3>
                <div style="height: 180px;">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-4">
                <h3 class="text-sm font-bold text-gray-900 mb-2">Confusion Matrix Comparison</h3>
                <div style="height: 180px;">
                    <canvas id="confusionChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Detailed Comparison Table - Compact -->
        <div class="bg-white rounded-xl shadow-lg p-4">
            <h3 class="text-sm font-bold text-gray-900 mb-3">Complete Model Comparison</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-xs">
                    <thead>
                        <tr class="border-b-2 border-gray-200 bg-gray-50">
                            <th class="text-left py-2 px-2 font-bold text-gray-700">Model</th>
                            <th class="text-center py-2 px-2 font-bold text-gray-700">Acc</th>
                            <th class="text-center py-2 px-2 font-bold text-gray-700">Prec</th>
                            <th class="text-center py-2 px-2 font-bold text-gray-700">Recall</th>
                            <th class="text-center py-2 px-2 font-bold text-gray-700">F1</th>
                            <th class="text-center py-2 px-2 font-bold text-gray-700">AUC</th>
                            <th class="text-center py-2 px-2 font-bold text-gray-700">Avg Prec</th>
                            <th class="text-center py-2 px-2 font-bold text-gray-700">Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b border-gray-100 bg-purple-50">
                            <td class="py-2 px-2 font-semibold text-gray-900">
                                <span class="flex items-center">
                                    <i class="fas fa-crown text-yellow-500 mr-1 text-[10px]"></i>
                                    Stacking
                                </span>
                            </td>
                            <td class="py-2 px-2 text-center font-bold text-purple-600">99.92%</td>
                            <td class="py-2 px-2 text-center">95.2%</td>
                            <td class="py-2 px-2 text-center">91.8%</td>
                            <td class="py-2 px-2 text-center font-bold text-purple-600">0.960</td>
                            <td class="py-2 px-2 text-center font-bold text-purple-600">0.992</td>
                            <td class="py-2 px-2 text-center">0.891</td>
                            <td class="py-2 px-2 text-center text-gray-500">45s</td>
                        </tr>
                        <tr class="border-b border-gray-100">
                            <td class="py-2 px-2 font-semibold text-gray-900">XGBoost</td>
                            <td class="py-2 px-2 text-center">99.74%</td>
                            <td class="py-2 px-2 text-center">93.5%</td>
                            <td class="py-2 px-2 text-center">90.1%</td>
                            <td class="py-2 px-2 text-center font-bold text-green-600">0.950</td>
                            <td class="py-2 px-2 text-center font-bold text-green-600">0.984</td>
                            <td class="py-2 px-2 text-center">0.876</td>
                            <td class="py-2 px-2 text-center text-gray-500">13s</td>
                        </tr>
                        <tr class="border-b border-gray-100">
                            <td class="py-2 px-2 font-semibold text-gray-900">Random Forest</td>
                            <td class="py-2 px-2 text-center">99.85%</td>
                            <td class="py-2 px-2 text-center">92.8%</td>
                            <td class="py-2 px-2 text-center">89.5%</td>
                            <td class="py-2 px-2 text-center font-bold text-blue-600">0.940</td>
                            <td class="py-2 px-2 text-center font-bold text-blue-600">0.976</td>
                            <td class="py-2 px-2 text-center">0.862</td>
                            <td class="py-2 px-2 text-center text-gray-500">18s</td>
                        </tr>
                        <tr class="border-b border-gray-100">
                            <td class="py-2 px-2 font-semibold text-gray-900">LightGBM</td>
                            <td class="py-2 px-2 text-center">99.68%</td>
                            <td class="py-2 px-2 text-center">91.2%</td>
                            <td class="py-2 px-2 text-center">88.7%</td>
                            <td class="py-2 px-2 text-center font-bold text-yellow-600">0.930</td>
                            <td class="py-2 px-2 text-center font-bold text-yellow-600">0.972</td>
                            <td class="py-2 px-2 text-center">0.854</td>
                            <td class="py-2 px-2 text-center text-gray-500">8s</td>
                        </tr>
                        <tr class="border-b border-gray-100">
                            <td class="py-2 px-2 font-semibold text-gray-900">Neural Network</td>
                            <td class="py-2 px-2 text-center">99.45%</td>
                            <td class="py-2 px-2 text-center">90.6%</td>
                            <td class="py-2 px-2 text-center">87.2%</td>
                            <td class="py-2 px-2 text-center font-bold text-pink-600">0.920</td>
                            <td class="py-2 px-2 text-center font-bold text-pink-600">0.958</td>
                            <td class="py-2 px-2 text-center">0.832</td>
                            <td class="py-2 px-2 text-center text-gray-500">32s</td>
                        </tr>
                        <tr class="border-b border-gray-100">
                            <td class="py-2 px-2 font-semibold text-gray-900">Voting</td>
                            <td class="py-2 px-2 text-center">99.78%</td>
                            <td class="py-2 px-2 text-center">93.1%</td>
                            <td class="py-2 px-2 text-center">89.9%</td>
                            <td class="py-2 px-2 text-center font-bold text-gray-600">0.940</td>
                            <td class="py-2 px-2 text-center font-bold text-gray-600">0.980</td>
                            <td class="py-2 px-2 text-center">0.868</td>
                            <td class="py-2 px-2 text-center text-gray-500">39s</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Quick Insights - Compact Row -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 mt-4">
            <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-3 text-white">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-trophy text-purple-200"></i>
                    <div>
                        <p class="text-purple-200 text-[10px]">Best Model</p>
                        <p class="font-bold text-sm">Stacking</p>
                    </div>
                </div>
            </div>
            <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-3 text-white">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-bolt text-green-200"></i>
                    <div>
                        <p class="text-green-200 text-[10px]">Fastest</p>
                        <p class="font-bold text-sm">LightGBM (8s)</p>
                    </div>
                </div>
            </div>
            <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-3 text-white">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-bullseye text-blue-200"></i>
                    <div>
                        <p class="text-blue-200 text-[10px]">Best Precision</p>
                        <p class="font-bold text-sm">Stacking (95.2%)</p>
                    </div>
                </div>
            </div>
            <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-3 text-white">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-check-double text-orange-200"></i>
                    <div>
                        <p class="text-orange-200 text-[10px]">Best Recall</p>
                        <p class="font-bold text-sm">Stacking (91.8%)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Radar Chart - Compact
    new Chart(document.getElementById('radarChart').getContext('2d'), {
        type: 'radar',
        data: {
            labels: ['Accuracy', 'Precision', 'Recall', 'F1', 'AUC'],
            datasets: [{
                label: 'Stacking',
                data: [99.92, 95.2, 91.8, 96, 99.2],
                borderColor: 'rgb(147, 51, 234)',
                backgroundColor: 'rgba(147, 51, 234, 0.1)',
                borderWidth: 2,
                pointRadius: 2
            }, {
                label: 'XGBoost',
                data: [99.74, 93.5, 90.1, 95, 98.4],
                borderColor: 'rgb(16, 185, 129)',
                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                borderWidth: 2,
                pointRadius: 2
            }, {
                label: 'RF',
                data: [99.85, 92.8, 89.5, 94, 97.6],
                borderColor: 'rgb(59, 130, 246)',
                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                borderWidth: 2,
                pointRadius: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'right',
                    labels: { boxWidth: 8, font: { size: 9 }, padding: 8 }
                }
            },
            scales: {
                r: {
                    beginAtZero: false,
                    min: 85,
                    max: 100,
                    ticks: { font: { size: 8 }, stepSize: 5 },
                    pointLabels: { font: { size: 9 } }
                }
            }
        }
    });
    
    // Confusion Chart - Compact
    new Chart(document.getElementById('confusionChart').getContext('2d'), {
        type: 'bar',
        data: {
            labels: ['TP', 'TN', 'FP', 'FN'],
            datasets: [{
                label: 'Stacking',
                data: [450, 56850, 25, 43],
                backgroundColor: 'rgba(147, 51, 234, 0.8)',
                borderRadius: 3
            }, {
                label: 'XGBoost',
                data: [442, 56845, 30, 51],
                backgroundColor: 'rgba(16, 185, 129, 0.8)',
                borderRadius: 3
            }, {
                label: 'RF',
                data: [438, 56840, 35, 55],
                backgroundColor: 'rgba(59, 130, 246, 0.8)',
                borderRadius: 3
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'top',
                    labels: { boxWidth: 8, font: { size: 9 }, padding: 8 }
                }
            },
            scales: {
                x: { ticks: { font: { size: 9 } } },
                y: { ticks: { font: { size: 9 } } }
            }
        }
    });
</script>
{% endblock %}